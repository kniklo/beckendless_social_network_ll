{"version":3,"names":["require","config","paths","sdk","uiBuilderSDKPath","define","BackendlessUI","startApp","onEnter","___arguments","context","pageData","userIdentity","whereClause","Backendless","UserService","describeUserClass","find","column","identity","name","query","DataQueryBuilder","create","setWhereClause","Data","of","User","onClick","pageName","goToPage","onSubmit","error","dataModel","Request","url","Error","startsWith","join","setEncoding","send","password","onChange","appData","getCurrentUser","buttonLogin","redirectData","redirectToPageName","redirectToUrl","sendUserTokenAndId","stayLoggedIn","user","username","params","async","login","setError","getObjectProperty","object","propPath","undefined","propsNamesList","split","result","i","length","getComponentDataStoreByUid","updateButtonLogin","logging","getComponentByUid","userToken","userId","Navigator","openWebPage","JSON","parse","currentUser","getCurrentUserToken"],"sources":["main.js"],"mappings":"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","sourcesContent":["require.config({\n    paths: {\n        'sdk': uiBuilderSDKPath + '/sdk',\n    }\n});\n\ndefine(['sdk'], BackendlessUI => BackendlessUI.startApp());\n\ndefine('./pages/404/components/page/bundle.js', [], () => ({\n  /* content */\n\n  /* handler:onEnter */\n  async onEnter(___arguments) {\n      ___arguments.context.pageData['error'] = null;\n  ___arguments.context.pageData['user'] = (\n      await (async function(userIdentity){\n        var userColumns = await Backendless.UserService.describeUserClass()\n        var identityColumn = userColumns.find(column => column.identity)\n        var whereClause = `${identityColumn.name} = '${userIdentity}'`\n        var query = Backendless.DataQueryBuilder.create().setWhereClause(whereClause)\n        var users = await Backendless.Data.of(Backendless.User).find(query)\n\n        return users[0]\n     })((___arguments.context.pageData['userIdentity']))\n  );\n\n  },  \n/* handler:onEnter *//* content */\n}));\n\ndefine('./pages/404/components/3665111f5a5b9f8f4b064bbdf6ce7a5c/bundle.js', [], () => ({\n  /* content */\n  /* handler:onClick */\n  async onClick(___arguments) {\n      ;await ( async function (pageName, pageData){ BackendlessUI.goToPage(pageName, pageData) })('', null);\n\n  },  \n  /* handler:onClick */\n  /* content */\n}))\n\ndefine('./pages/change-password/components/page/bundle.js', [], () => ({\n  /* content */\n\n  /* handler:onEnter */\n  onEnter(___arguments) {\n      ___arguments.context.pageData['error'] = null;\n  ___arguments.context.pageData['result'] = null;\n\n  },  \n/* handler:onEnter *//* content */\n}));\n\ndefine('./pages/change-password/components/58ecb77e91b7d9dd5c99075111c91c64/bundle.js', [], () => ({\n  /* content */\n\n  /* handler:onSubmit */\n  async onSubmit(___arguments) {\n    var error;\n\n\n  ___arguments.context.pageData['result'] = '';\n  ___arguments.context.pageData['error'] = '';\n  if ((___arguments.context.dataModel['password']) == (___arguments.context.dataModel['confirm_password'])) {\n    try {\n      ___arguments.context.pageData['result'] = (await Backendless.Request['post']((function(url){ if( !url ) { throw new Error('Url must be specified.')} if( !url.startsWith('http://') && !url.startsWith('https://')) { return 'https://' + url } return url})(([(Backendless.appPath),'/change_password/',(___arguments.context.pageData['token'])].join('')))).setEncoding('utf8').send(({ 'password': (___arguments.context.dataModel['password']) })));\n\n    } catch (error) {\n      ___arguments.context.pageData['error'] = ((typeof (error['message']) === 'string') ? (error['message']) : error);\n\n    }\n  } else {\n    ___arguments.context.pageData['error'] = 'Passwords do not match';\n  }\n\n  },  \n  /* handler:onSubmit *//* content */\n}));\n\ndefine('./pages/change-password/components/9c0e75137e04bad6e50940e30ee54426/bundle.js', [], () => ({\n  /* content */\n\n  /* handler:onChange */\n  onChange(___arguments) {\n      ___arguments.context.pageData['error'] = null;\n  ___arguments.context.pageData['result'] = null;\n\n  },  \n/* handler:onChange *//* content */\n}));\n\ndefine('./pages/change-password/components/1e3bdf67c1f295ed344408cd7f1dba1d/bundle.js', [], () => ({\n  /* content */\n\n  /* handler:onChange */\n  onChange(___arguments) {\n      ___arguments.context.pageData['error'] = null;\n  ___arguments.context.pageData['result'] = null;\n\n  },  \n/* handler:onChange *//* content */\n}));\n\ndefine('./pages/logged-in/components/page/bundle.js', [], () => ({\n  /* content */\n  /* handler:onEnter */\n  async onEnter(___arguments) {\n    var currentUser;\n\n\n  if (!(___arguments.context.appData['currenUser'])) {\n    ___arguments.context.appData['currenUser'] = (await Backendless.UserService.getCurrentUser());\n  }\n  currentUser = (___arguments.context.appData['currenUser']);\n  if (!currentUser) {\n    ;await ( async function (pageName, pageData){ BackendlessUI.goToPage(pageName, pageData) })('login', null);\n  }\n\n  },  \n  /* handler:onEnter */\n  /* content */\n}))\n\ndefine('./pages/login/components/85dae34486144e2efa2d934bfdddb172/bundle.js', [], () => ({\n  /* content */\n\n  /* handler:onSubmit */\n  async onSubmit(___arguments) {\n    var buttonLogin, error, logging, password, redirectData, redirectToPageName, redirectToUrl, sendUserTokenAndId, stayLoggedIn, user, username;\n\n/**\n * Describe this function...\n */\nasync function login() {\n  try {\n    user = (await Backendless.UserService.login( username, password, stayLoggedIn  ));\n\n  } catch (error) {\n    await setError(error);\n\n  }\n}\n\nfunction getObjectProperty(object, propPath) {\n  if (typeof propPath !== 'string' || object[propPath] !== undefined) {\n    return object[propPath]\n  }\n\n  const propsNamesList = propPath.split('.')\n\n  let result = object\n\n  for (let i = 0; i < propsNamesList.length; i++) {\n    if (!result || result[propsNamesList[i]] === undefined) {\n      return\n    }\n\n    result = result[propsNamesList[i]]\n  }\n\n  return result\n}\n\n/**\n * Describe this function...\n */\nasync function setError(error) {\n  ((function (componentUid) { return ___arguments.context.getComponentDataStoreByUid(componentUid) })('85dae34486144e2efa2d934bfdddb172'))['error'] = error;\n}\n\n/**\n * Describe this function...\n */\nasync function updateButtonLogin(logging) {\n  buttonLogin = ((function (componentUid) { return ___arguments.context.getComponentByUid(componentUid) })('db5546014b7940ad8771a98d85f83036'));\n  buttonLogin['label'] = (logging ? 'Please wait...' : 'Login');\n  buttonLogin['disabled'] = logging;\n}\n\n\n  redirectToUrl = (getObjectProperty(___arguments.context.pageData, 'redirectToUrl'));\n  redirectToPageName = (getObjectProperty(___arguments.context.pageData, 'redirectToPageName'));\n  redirectData = (getObjectProperty(___arguments.context.pageData, 'redirectData'));\n  sendUserTokenAndId = (getObjectProperty(___arguments.context.pageData, 'sendUserTokenAndId'));\n  await setError(null);\n  username = (getObjectProperty(___arguments.context.dataModel, 'username'));\n  password = (getObjectProperty(___arguments.context.dataModel, 'password'));\n  stayLoggedIn = (getObjectProperty(___arguments.context.dataModel, 'stayLoggedIn'));\n  if (username && password) {\n    await updateButtonLogin(true);\n    try {\n      await login();\n\n    } catch (error) {\n      if ((getObjectProperty(error, 'code')) == 3033) {\n        await login();\n      } else {\n        await setError(error);\n      }\n\n    } finally {\n      await updateButtonLogin(false);\n\n    }\n  } else {\n    await setError((new Error('Username and Password must be filled')));\n  }\n  if (user) {\n    ___arguments.context.appData['currentUser'] = user;\n    if (redirectToUrl) {\n      (function (url, isExternal, params) { BackendlessUI.Navigator.openWebPage(url, isExternal, params); })(redirectToUrl, false, (sendUserTokenAndId ? ({ 'userToken': (getObjectProperty(user, 'user-token')),'userId': (getObjectProperty(user, 'objectId')),'stayLoggedIn': stayLoggedIn }) : ''));\n    } else if (redirectToPageName) {\n      (function (pageName, pageData) { BackendlessUI.Navigator.goToPage(pageName, pageData) })(redirectToPageName, (redirectData ? (JSON.parse(redirectData)) : null));\n    } else {\n      (function (pageName, pageData) { BackendlessUI.Navigator.goToPage(pageName, pageData) })('logged-in', undefined);\n    }\n  }\n\n  },\n  /* handler:onSubmit *//* content */\n}));\n\ndefine('./pages/login/components/page/bundle.js', [], () => ({\n  /* content */\n  /* handler:onEnter */\n  async onEnter(___arguments) {\n    var redirectData, redirectToPageName, stayLoggedIn, user, sendUserTokenAndId, redirectToUrl, currentUser;\n\nfunction getObjectProperty(object, propPath) {\n  if (typeof propPath !== 'string' || object[propPath] !== undefined) {\n    return object[propPath]\n  }\n\n  const propsNamesList = propPath.split('.')\n\n  let result = object\n\n  for (let i = 0; i < propsNamesList.length; i++) {\n    if (!result || result[propsNamesList[i]] === undefined) {\n      return\n    }\n\n    result = result[propsNamesList[i]]\n  }\n\n  return result\n}\n\n\n  currentUser = (getObjectProperty(___arguments.context.appData, 'currentUser')) ? (getObjectProperty(___arguments.context.appData, 'currentUser')) : (await Backendless.UserService.getCurrentUser(false));\n  redirectToUrl = (getObjectProperty(___arguments.context.pageData, 'redirectToUrl'));\n  redirectToPageName = (getObjectProperty(___arguments.context.pageData, 'redirectToPageName'));\n  redirectData = (getObjectProperty(___arguments.context.pageData, 'redirectData'));\n  sendUserTokenAndId = (getObjectProperty(___arguments.context.pageData, 'sendUserTokenAndId'));\n  if (currentUser) {\n    if (redirectToUrl) {\n      (function (url, isExternal, params) { BackendlessUI.Navigator.openWebPage(url, isExternal, params); })(redirectToUrl, false, (sendUserTokenAndId ? ({ 'userToken': (await (async function() {\n      \treturn Backendless.UserService.getCurrentUserToken()\n      })()),'userId': (getObjectProperty(currentUser, 'objectId')),'stayLoggedIn': true }) : ''));\n    } else if (redirectToPageName) {\n      (function (pageName, pageData) { BackendlessUI.Navigator.goToPage(pageName, pageData) })(redirectToPageName, (redirectData ? (JSON.parse(redirectData)) : null));\n    } else {\n      (function (pageName, pageData) { BackendlessUI.Navigator.goToPage(pageName, pageData) })('logged-in', undefined);\n    }\n  }\n\n  },\n  /* handler:onEnter */\n  /* content */\n}))\n\n"]}